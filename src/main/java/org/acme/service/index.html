<!-- CSS style sheets for Prism.js -->
<link
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css"
        rel="stylesheet"
/>
<link
        href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.css"
        rel="stylesheet"
/>
<!-- Code snippet content -->
<pre class="line-numbers">
  <code style="font-family: Monaco, sans-serif" class="language-python">
  @Singleton
  public class CustomConfiguration {

        @Inject
        GlobalTagsConfig tagsConfig;

        @Produces
        @Singleton
        public MeterFilter configureAllRegistries() {
            return MeterFilter.commonTags(Arrays.asList(
                    Tag.of(GlobalTagsConfig.PROFILE, ProfileManager.getActiveProfile()),
                    Tag.of(GlobalTagsConfig.REGION, tagsConfig.region)));
        }

        @Produces
        @Singleton
        public MeterFilter configureMeterFromEnvironment() {
            return new MeterFilter() {
                @Override
                public Meter.Id map(Meter.Id id) {
                    if(id.getName().startsWith(tagsConfig.customMeter)) {
                        return id.withName(tagsConfig.customMeter+"." + id.getName())
                                .withTag(new ImmutableTag(tagsConfig.customMeter+".tag", "value"));
                    }
                    return id;
                }
            };
        }
    }
  </code>
</pre>
<!-- Javascript for Prism.js core, line number display, and python syntax highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/components/prism-python.min.js"></script>